<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Painel Completo</title>
<style>
body{
  background:#111;
  color:white;
  font-family:Arial;
  text-align:center;
  padding:40px;
}
input, button{
  padding:10px;
  margin:10px;
}
ul{
  text-align:left;
  display:inline-block;
  padding-left:20px;
}
</style>
</head>
<body>

<h1>ðŸŽ™ Painel de Controle</h1>

<h3>Abrir URL</h3>
<input type="text" id="url" placeholder="Cole o link aqui" size="40">
<br>
<button onclick="abrirUrl()">Abrir URL</button>

<hr>

<h3>Text-to-Speech</h3>
<input type="text" id="texto" placeholder="Digite o que serÃ¡ falado" size="40">
<br>
<label>Volume:</label>
<input type="range" id="volume" min="0" max="1" step="0.1" value="1">
<br>
<button onclick="falar()">Falar</button>

<hr>

<h3>Conectados:</h3>
<ul id="listaConectados"></ul>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyCCz1Z1pg95O0NER7_IRKoJ0mDqPgWaW-o",
  databaseURL: "https://painel-caos-default-rtdb.firebaseio.com"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.database();

function abrirUrl(){
  const url = document.getElementById("url").value.trim();
  if(!url) return;

  let finalUrl = url;
  if(!finalUrl.startsWith("http://") && !finalUrl.startsWith("https://")){
    finalUrl = "https://" + finalUrl;
  }

  db.ref("comando").set({
    tipo: "abrir",
    url: finalUrl
  });
}

function falar(){
  const texto = document.getElementById("texto").value;
  const volume = parseFloat(document.getElementById("volume").value);

  if(!texto) return;

  db.ref("comando").set({
    tipo: "tts",
    texto: texto,
    volume: volume
  });
}

// Lista de conectados
const lista = document.getElementById("listaConectados");
db.ref("conectados").on("value", snap => {
  lista.innerHTML = "";
  snap.forEach(userSnap => {
    const li = document.createElement("li");
    li.textContent = userSnap.key;
    lista.appendChild(li);
  });
});
</script>

</body>
</html>
