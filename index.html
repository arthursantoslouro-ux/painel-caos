<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Painel Controle</title>
<style>
body { font-family: Arial; background: #111; color: #fff; padding: 20px; }
input, button, label { margin: 5px; padding: 8px; }
ul { list-style-type: none; padding-left: 0; }
li { padding: 3px 0; }
</style>
</head>
<body>

<h1>Painel Controle</h1>

<h3>Enviar URL</h3>
<input type="text" id="url" placeholder="Digite o link aqui" size="40">
<button onclick="enviarUrl()">Enviar URL</button>

<hr>

<h3>Enviar TTS</h3>
<input type="text" id="texto" placeholder="Digite o texto aqui" size="40">
<br>
<label>Volume:</label>
<input type="range" id="volume" min="0" max="1" step="0.1" value="1">
<br>
<button onclick="enviarTTS()">Enviar TTS</button>

<hr>

<h3>Conectados:</h3>
<ul id="listaConectados"></ul>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyCCz1Z1pg95O0NER7_IRKoJ0mDqPgWaW-o",
  databaseURL: "https://painel-caos-default-rtdb.firebaseio.com"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.database();

// Enviar URL
function enviarUrl(){
  const url = document.getElementById("url").value.trim();
  if(!url) return;

  let finalUrl = url;
  if(!finalUrl.startsWith("http://") && !finalUrl.startsWith("https://")){
    finalUrl = "https://" + finalUrl;
  }

  db.ref("comando").set({ tipo: "abrir", url: finalUrl });
  alert("URL enviada!");
}

// Enviar TTS
function enviarTTS(){
  const texto = document.getElementById("texto").value.trim();
  const volume = parseFloat(document.getElementById("volume").value);
  if(!texto) return;

  db.ref("comando").set({ tipo: "tts", texto: texto, volume: volume });
  alert("TTS enviado!");
}

// Lista de conectados
const lista = document.getElementById("listaConectados");
db.ref("conectados").on("value", snap => {
  lista.innerHTML = "";
  snap.forEach(userSnap => {
    const li = document.createElement("li");
    li.textContent = userSnap.key;
    lista.appendChild(li);
  });
});
</script>

</body>
</html>
